/*! VKFill - v0.0.1 - 2013-05-04
* http://nergal.github.io/vkfill
* Copyright (c) 2013 nergal; Licensed  */
(function(){var t=!0,e=function(t){this.post=t};e.prototype.calculate=function(){return 42},e.prototype.getTextInfo=function(){return"some text"};var i={};i.link=function(t){this.url=null,t&&(this.url=t.href||null,this.is_external=!!t.href.match("/away.php"),this.is_group=null!==t.getAttribute("mention_id"),this.has_fake_continous="mem_link"===t.getAttribute("class"))},i.post=function(t){if(this.id=null,t&&t.id){this._dom=t,this.id=t.id;var e=geByClass1("author",t);this.poster_id=e&&e.dataset?e.dataset.fromId:null,this.from_group=0>parseInt(this.poster_id,10),this.is_repost=geByClass1("published_by",t)!==void 0,this.links=this._fillLinks(t),this.text=this._fillText(t),this.images=this._fillImages(t)}},i.post.prototype.fadeOut=function(){setStyle(this._dom,{position:"relative",opacity:"0.3","-webkit-filter":"blur(5px)"})},i.post.prototype.fadeIn=function(){setStyle(this._dom,{position:"relative",opacity:"1","-webkit-filter":"none"})},i.post.prototype.ban=function(){t&&this.fadeOut()},i.post.prototype._fillLinks=function(t){for(var e=geByTag("a",t),o=[],s=0,n=e.length;n>s;s++)o.push(new i.link(e[s]));return o},i.post.prototype._fillText=function(t){return geByClass1("wall_post_text",t)},i.post.prototype._fillImages=function(t){return geByClass("page_post_sized_thumbs",t)},i.post.prototype.getHeuristic=function(){return new e(this)},i.post.prototype._debugText=function(){var t=this.getHeuristic();return t.getTextInfo()},i.post.prototype.getGrade=function(){var t=this.getHeuristic();return t.calculate()};var o=function(){var t=ge("feed_wall"),e=geByClass("post",t);this.posts=[];for(var o=0,s=e.length;s>o;o++)this.posts.push(new i.post(e[o]))};if(o.prototype.appendLabel=function(t,e){var i={"font-weight":"bold",position:"absolute",top:0,right:0,padding:"0.3em 1em","background-color":"#C2BBFF","border-radius":"0 0 7px 7px",color:"#ffffff"},o=ce("span",{innerHTML:e},i),s=ge(t);setStyle(s,{position:"relative"}),s.appendChild(o)},o.prototype.proceed=function(e){for(var i,o,s=0,n=this.posts.length;n>s;s++)o=this.posts[s],t===!0&&(i=o._debugText(),this.appendLabel(o.id,i)),o.getGrade()>e&&o.ban()},"vk.com"===document.location.host){var s=new o;s.proceed(25)}else window._test={},window._test.struct=i,window._test.VKFill=o,window._test.Heuristic=e})();